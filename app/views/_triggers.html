<div class="builds-block">
  <div class="builds" ng-repeat="trigger in triggers">
    <div ng-if="trigger.type === 'ImageChange'">
      <div ng-repeat="build in buildsByOutputImage[(trigger.imageChangeParams.from | imageObjectRef : namespace)] | orderObjectsByDate track by (build | uid)"
          ng-if="!isBuildHidden(build)"
          class="build animate-repeat"
          kind="Build"
          resource="build">
        <!-- Icon -->
        <status-icon status="build.status.phase" style="margin-right: 5px;"></status-icon>
        <!-- Message -->
        <translate>Build</translate>
        <span ng-if="build | annotation : 'buildNumber'">
          <a ng-href="{{build | navigateResourceURL}}">
            <span ng-if="build | buildConfigForBuild">{{build | buildConfigForBuild}}</span>
            #{{build | annotation : 'buildNumber'}}
          </a>
        </span>
        <span ng-if="!(build | annotation : 'buildNumber')">
          {{build.metadata.name}}
        </span>
        <span ng-switch="build.status.phase" class="hide-ng-leave" style="margin-right: 5px;">
          <span ng-switch-when="Complete" translate>completed.</span>
          <span ng-switch-when="Failed" translate>failed.</span>
          <span ng-switch-when="Error" translate>encountered an error.</span>
          <span ng-switch-when="Cancelled" translate>was cancelled.</span>
          <span ng-switch-default>is {{build.status.phase | lowercase}}.
            <span ng-if="trigger.imageChangeParams.automatic" transalte>
              A new deployment will be created automatically once the build completes.
            </span>
          </span>
        </span>
        <span ng-if="'builds/log' | canI : 'get'">
          <a ng-if="!!['New', 'Pending'].indexOf(build.status.phase) && (build | buildLogURL)" ng-href="{{build | buildLogURL}}" translate>View Log</a>
          <span class="action-divider" ng-show="!!['New', 'Pending'].indexOf(build.status.phase) && (build | buildLogURL) && !(build | isIncompleteBuild)">|</span>
        </span>
        <a ng-hide="build | isIncompleteBuild" href="" ng-click="hideBuild(build)" translate>Dismiss</a>
      </div>
    </div>
  </div>
</div>



